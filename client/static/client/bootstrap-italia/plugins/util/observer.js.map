{"version":3,"file":"observer.js","sources":["../../../src/js/plugins/util/observer.js"],"sourcesContent":["/**\n * Mutation CSS Class Observer Object\n */\n//https://stackoverflow.com/a/53914092\n\nclass CssClassObserver {\n  constructor(targetNode, classToWatch, classAddedCallback, classRemovedCallback, ignoreToggle) {\n    this.targetNode = targetNode\n    this.classToWatch = classToWatch\n    this.classAddedCallback = classAddedCallback\n    this.classRemovedCallback = classRemovedCallback\n    this.observer = null\n    this.lastClassState = targetNode.classList.contains(this.classToWatch)\n    this.ignoreToggle = !!ignoreToggle\n\n    this.init()\n  }\n\n  init() {\n    this.observer = new MutationObserver((mutationsList) => this.mutationCallback(mutationsList))\n    this.observe()\n  }\n\n  observe() {\n    this.observer.observe(this.targetNode, { attributes: true })\n  }\n\n  disconnect() {\n    this.observer.disconnect()\n  }\n\n  mutationCallback(mutationsList) {\n    for (let mutation of mutationsList) {\n      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n        let currentClassState = mutation.target.classList.contains(this.classToWatch)\n        if (this.ignoreToggle || this.lastClassState !== currentClassState) {\n          this.lastClassState = currentClassState\n          if (currentClassState) {\n            this.classAddedCallback()\n          } else {\n            this.classRemovedCallback()\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Mutation Content Class Observer Object\n */\n\nclass ContentObserver {\n  constructor(targetNode, contentSelector, contentAddedCallback, contentRemovedCallback) {\n    this.targetNode = targetNode\n    this.contentSelector = contentSelector\n    this.contentAddedCallback = contentAddedCallback\n    this.contentRemovedCallback = contentRemovedCallback\n    this.observer = null\n\n    this.init()\n  }\n\n  init() {\n    this.observer = new MutationObserver((mutationsList) => this.mutationCallback(mutationsList))\n    this.observe()\n  }\n\n  observe() {\n    this.observer.observe(this.targetNode, { childList: true })\n  }\n\n  disconnect() {\n    this.observer.disconnect()\n  }\n\n  mutationCallback(mutationsList) {\n    for (let mutation of mutationsList) {\n      if (mutation.type === 'childList') {\n        mutation.addedNodes.forEach((node) => {\n          if (node.matches(this.contentSelector)) {\n            this.contentAddedCallback()\n          }\n        })\n        mutation.removedNodes.forEach((node) => {\n          if (node.matches(this.contentSelector)) {\n            this.contentRemovedCallback()\n          }\n        })\n      }\n    }\n  }\n}\n\nexport { CssClassObserver, ContentObserver }\n"],"names":[],"mappings":"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"}